<app-technique-header
  title="Krama PÄá¹­ha"
  sanskrit=" à¤•à¥à¤°à¤®à¤ªà¤¾à¤ "
  emoji="ğŸ”„"
  color="tertiary"
  [translucent]="true"
  [showMenuButton]="true">
</app-technique-header>

<ion-content [fullscreen]="true" class="krama-content">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Krama PÄá¹­ha</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-icon">
      <ion-icon name="shuffle-outline"></ion-icon>
    </div>
    <h1 class="hero-title">Krama PÄá¹­ha</h1>
    <div class="hero-sanskrit">à¤•à¥à¤°à¤®à¤ªà¤¾à¤ </div>
    <p class="hero-description">
      The Sequential Word-Combination Method - A traditional Vedic technique where words are recited in overlapping pairs to build perfect continuity and flow
    </p>
  </div>

  <!-- Introduction Section -->
  <div class="introduction-section">
    <div class="intro-header">
      <ion-icon name="library-outline" color="primary"></ion-icon>
      <h2>What is Krama PÄá¹­ha (à¤•à¥à¤°à¤®à¤ªà¤¾à¤ )?</h2>
    </div>

    <div class="intro-content">
      <div class="definition-card">
        <h3>ğŸ“š Definition</h3>
        <p><strong>"Krama"</strong> = sequence/order, <strong>"pÄá¹­ha"</strong> = recitation</p>
        <p>Words are recited in overlapping pairs: first word alone, then first+second together, then second word alone, then second+third together, and so on.</p>
      </div>

      <div class="purpose-card">
        <h3>ğŸ¯ Purpose & Benefits</h3>
        <ul>
          <li>Builds seamless word-to-word transitions</li>
          <li>Strengthens memory through pattern recognition</li>
          <li>Develops perfect pronunciation and sandhi connections</li>
          <li>Creates muscle memory for smooth recitation flow</li>
          <li>Traditional method used for Vedic text preservation</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Method Explanation Section -->
  <div class="method-section">
    <h2>ğŸ”€ How Krama PÄá¹­ha Works</h2>

    <div class="method-example">
      <div class="example-header">
        <h3>Example: Bhagavad GÄ«tÄ 2.47 (First Line)</h3>
        <div class="original-line">
          <div class="line-devanagari">à¤•à¤°à¥à¤®à¤£à¥à¤¯à¥‡à¤µà¤¾à¤§à¤¿à¤•à¤¾à¤°à¤¸à¥à¤¤à¥‡ à¤®à¤¾ à¤«à¤²à¥‡à¤·à¥ à¤•à¤¦à¤¾à¤šà¤¨</div>
          <div class="line-roman">karmaá¹‡y evÄdhikÄras te mÄ phaleá¹£u kadÄcana</div>
          <div class="word-breakdown">
            <span class="word-tag">à¤•à¤°à¥à¤®à¤£à¥à¤¯à¥‡à¤µ</span>
            <span class="word-tag">à¤…à¤§à¤¿à¤•à¤¾à¤°à¤ƒ</span>
            <span class="word-tag">à¤¤à¥‡</span>
            <span class="word-tag">à¤®à¤¾</span>
            <span class="word-tag">à¤«à¤²à¥‡à¤·à¥</span>
            <span class="word-tag">à¤•à¤¦à¤¾à¤šà¤¨</span>
          </div>
        </div>
      </div>

      <div class="krama-sequence">
        <div class="sequence-title">
          <ion-icon name="arrow-forward-outline"></ion-icon>
          <h4>Krama PÄá¹­ha Sequence</h4>
        </div>

        <div class="sequence-steps">
          <div class="sequence-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-pattern">Single â†’ Pair â†’ Single â†’ Pair...</div>
              <div class="step-recitation">
                <div class="recite-item single">à¤•à¤°à¥à¤®à¤£à¥à¤¯à¥‡à¤µ</div>
                <div class="recite-item pair">à¤•à¤°à¥à¤®à¤£à¥à¤¯à¥‡à¤µ à¤…à¤§à¤¿à¤•à¤¾à¤°à¤ƒ</div>
                <div class="recite-item single">à¤…à¤§à¤¿à¤•à¤¾à¤°à¤ƒ</div>
                <div class="recite-item pair">à¤…à¤§à¤¿à¤•à¤¾à¤°à¤ƒ à¤¤à¥‡</div>
                <div class="recite-item single">à¤¤à¥‡</div>
                <div class="recite-item pair">à¤¤à¥‡ à¤®à¤¾</div>
                <div class="recite-item single">à¤®à¤¾</div>
                <div class="recite-item pair">à¤®à¤¾ à¤«à¤²à¥‡à¤·à¥</div>
                <div class="recite-item single">à¤«à¤²à¥‡à¤·à¥</div>
                <div class="recite-item pair">à¤«à¤²à¥‡à¤·à¥ à¤•à¤¦à¤¾à¤šà¤¨</div>
                <div class="recite-item single">à¤•à¤¦à¤¾à¤šà¤¨</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="benefits-highlight">
        <h4>ğŸŒŸ Why This Pattern Works</h4>
        <div class="benefits-grid">
          <div class="benefit-item">
            <ion-icon name="link-outline" color="primary"></ion-icon>
            <span>Creates Strong Word Connections</span>
          </div>
          <div class="benefit-item">
            <ion-icon name="refresh-outline" color="secondary"></ion-icon>
            <span>Reinforces Through Repetition</span>
          </div>
          <div class="benefit-item">
            <ion-icon name="musical-notes-outline" color="tertiary"></ion-icon>
            <span>Builds Natural Rhythm</span>
          </div>
          <div class="benefit-item">
            <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
            <span>Ensures Accurate Pronunciation</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Training Modes Section -->
  @if (!selectedMode) {
    <div class="training-modes-section">
      <h2>ğŸ“ Krama PÄá¹­ha Training Modes</h2>
      <div class="modes-grid">
        <div class="mode-card" (click)="selectMode('guided')">
          <div class="mode-icon">
            <ion-icon name="school-outline" color="primary"></ion-icon>
          </div>
          <h3>Guided Practice</h3>
          <p>Step-by-step guidance through the Krama sequence with audio support</p>
          <div class="mode-features">
            <span>ğŸ¯ Beginner Friendly</span>
            <span>ğŸ”Š Audio Guidance</span>
            <span>ğŸ“‹ Step-by-Step</span>
          </div>
        </div>
        <div class="mode-card" (click)="selectMode('interactive')">
          <div class="mode-icon">
            <ion-icon name="play-circle-outline" color="secondary"></ion-icon>
          </div>
          <h3>Interactive Practice</h3>
          <p>Practice with real-time feedback and correction</p>
          <div class="mode-features">
            <span>âš¡ Real-time Feedback</span>
            <span>ğŸ¤ Voice Recognition</span>
            <span>ğŸ“Š Progress Tracking</span>
          </div>
        </div>
        <div class="mode-card" (click)="selectMode('challenge')">
          <div class="mode-icon">
            <ion-icon name="trophy-outline" color="warning"></ion-icon>
          </div>
          <h3>Challenge Mode</h3>
          <p>Test your mastery with timed Krama recitation challenges</p>
          <div class="mode-features">
            <span>â±ï¸ Timed Practice</span>
            <span>ğŸ† Mastery Tests</span>
            <span>ğŸ“ˆ Performance Metrics</span>
          </div>
        </div>
        <div class="mode-card" (click)="selectMode('custom')">
          <div class="mode-icon">
            <ion-icon name="settings-outline" color="tertiary"></ion-icon>
          </div>
          <h3>Custom Practice</h3>
          <p>Create your own Krama sequences with any Sanskrit text</p>
          <div class="mode-features">
            <span>âœï¸ Custom Input</span>
            <span>ğŸ”§ Flexible Settings</span>
            <span>ğŸ’¾ Save Sequences</span>
          </div>
        </div>
      </div>
      @if (!selectedMode) {
        <div class="mode-instruction">
          <p><ion-icon name="information-circle-outline" color="primary"></ion-icon>
        Choose a training mode above, then select a Å›loka to begin your Krama PÄá¹­ha practice</p>
      </div>
    }
  </div>
}

<!-- Sloka Selection Section -->
@if (!selectedMode) {
  <div class="sloka-selection-section">
    <h2>ğŸ“œ Choose Your Åšloka for Krama Practice</h2>
    <div class="sloka-cards">
      @for (sloka of availableSlokas; track sloka) {
        <ion-card
          class="sloka-card"
          (click)="selectSloka(sloka.id)"
          >
          <ion-card-header>
            <ion-card-title>{{sloka.title}}</ion-card-title>
            <ion-card-subtitle>{{sloka.subtitle}}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <div class="sloka-info">
              <div class="word-count">
                <ion-icon name="text-outline"></ion-icon>
                <span>{{sloka.words.length}} Words Total</span>
              </div>
              <div class="difficulty">
                @for (star of getDifficultyStars(sloka.difficulty); track star) {
                  <ion-icon
                    name="star-outline"
                    color="warning"
                  ></ion-icon>
                }
                <span>{{sloka.difficulty}}</span>
              </div>
            </div>
            <p>{{sloka.meaning.length > 50 ? sloka.meaning.substring(0, 50) + '...' : sloka.meaning}}</p>
            <div class="sequence-preview">
              <span class="sequence-count">{{getKramaStepCount(sloka)}} Krama Steps</span>
            </div>
            <div class="action-hint">
              <ion-icon name="play-circle-outline" color="primary"></ion-icon>
              <span>Click to Start Practice</span>
            </div>
          </ion-card-content>
        </ion-card>
      }
    </div>
  </div>
}

<!-- Tips Section -->
<div class="tips-section">
  <h2>ğŸ’¡ Krama PÄá¹­ha Mastery Tips</h2>
  <div class="tips-grid">
    <div class="tip-card">
      <ion-icon name="volume-high-outline" color="primary"></ion-icon>
      <h4>Focus on Transitions</h4>
      <p>Pay special attention to how words flow together in the pair combinations</p>
    </div>
    <div class="tip-card">
      <ion-icon name="repeat-outline" color="secondary"></ion-icon>
      <h4>Maintain Rhythm</h4>
      <p>Keep a steady pace throughout the entire Krama sequence</p>
    </div>
    <div class="tip-card">
      <ion-icon name="ear-outline" color="tertiary"></ion-icon>
      <h4>Listen Carefully</h4>
      <p>Train your ear to hear the subtle sandhi changes between words</p>
    </div>
    <div class="tip-card">
      <ion-icon name="time-outline" color="warning"></ion-icon>
      <h4>Practice Patience</h4>
      <p>Krama builds memory gradually - don't rush through the sequence</p>
    </div>
  </div>
</div>

</ion-content>
