<div class="arati-songs-page">
<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Devotional Arati Songs</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Devotional Arati Songs</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Category Header with Search -->
  <div class="category-header">
    <div class="category-title-section">
      <ion-icon name="musical-notes-outline" class="category-icon"></ion-icon>
      <ion-text>
        <h1>{{ songsData()?.categoryName || 'Loading...' }}</h1>
      </ion-text>
    </div>
    
    <ion-searchbar 
      placeholder="Search songs, artists, or descriptions..."
      [value]="searchTerm()"
      (ionInput)="onSearchChange($event)"
      [debounce]="300"
      show-clear-button="focus">
    </ion-searchbar>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-container">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <ion-text>
        <p>Loading devotional songs...</p>
      </ion-text>
    </div>
  }

  <!-- Error State -->
  @if (error()) {
    <div class="error-container">
      <ion-text color="danger">
        <h3>{{ error() }}</h3>
      </ion-text>
      <ion-button fill="outline" color="primary" (click)="onRetry()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Try Again
      </ion-button>
    </div>
  }

  <!-- Songs Grid -->
  @if (!isLoading() && !error() && filteredSongs().length > 0) {
    <div class="songs-container">
      <ion-grid>
        <ion-row>
          @for (song of filteredSongs(); track trackBySongTitle(0, song)) {
            <ion-col 
              size="12" 
              size-md="6" 
              size-lg="4"
            >
          <ion-card class="song-card" (click)="onSongCardClick(song)">
            <div class="card-image-container">
              <ion-img 
                [src]="song.img" 
                [alt]="song.title"
                class="song-image">
              </ion-img>
              <div class="play-overlay">
                <ion-icon name="play-outline" class="play-icon"></ion-icon>
              </div>
            </div>
            
            <ion-card-header>
              <ion-card-title class="song-title">{{ song.title }}</ion-card-title>
              <ion-card-subtitle class="song-author">
                <ion-icon name="person-outline" class="author-icon"></ion-icon>
                {{ song.audioData.auther }}
              </ion-card-subtitle>
            </ion-card-header>
            
            <ion-card-content>
              <ion-text>
                <p class="song-description">{{ truncateText(song.desc) }}</p>
              </ion-text>
              
              <div class="card-actions">
                <ion-chip color="primary" class="devotional-chip">
                  <ion-icon name="musical-notes-outline"></ion-icon>
                  <ion-label>Devotional</ion-label>
                </ion-chip>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
          }
        </ion-row>
      </ion-grid>
    </div>
  }

  <!-- No Results State -->
  @if (!isLoading() && !error() && filteredSongs().length === 0 && searchTerm()) {
    <div class="no-results-container">
      <ion-text>
        <h3>No songs found</h3>
        <p>Try searching with different keywords or clear the search to see all songs.</p>
      </ion-text>
      <ion-button fill="outline" color="primary" (click)="searchTerm.set('')">
        <ion-icon name="search-outline" slot="start"></ion-icon>
        Clear Search
      </ion-button>
    </div>
  }

  <!-- Empty State -->
  @if (!isLoading() && !error() && songsData() && songsData()!.cardItems.length === 0) {
    <div class="empty-container">
      <ion-text>
        <h3>No devotional songs available</h3>
        <p>Please check back later for new content.</p>
      </ion-text>
    </div>
  }
</ion-content>
</div>
