<app-technique-header 
  title="Bhagavad Gƒ´tƒÅ" 
  sanskrit="‡§≠‡§ó‡§µ‡§¶‡•ç ‡§ó‡•Ä‡§§‡§æ" 
  emoji="üïâÔ∏è"
  color="tertiary" 
  [translucent]="true" 
  [showMenuButton]="true">
</app-technique-header>

<ion-content [fullscreen]="true" class="bg-gradient">
  <!-- Pull to Refresh (Mobile Only) -->
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)" [disabled]="!isMobile()">
    <ion-refresher-content
      pullingIcon="chevron-down-circle-outline"
      pullingText="üïâÔ∏è Pull to refresh chapters"
      refreshingSpinner="crescent"
      refreshingText="üîÑ Loading chapters...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Bhagavad Gƒ´tƒÅ</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Welcome Section -->
  <div class="welcome-section">
    <ion-text color="primary">
      <h1 class="welcome-title">üïâÔ∏èSrimad Bhagavad Gƒ´tƒÅ</h1>
    </ion-text>
    <ion-text color="medium">
      <p class="welcome-subtitle">Choose your Chapter to Learn</p>
    </ion-text>
    
    <!-- Quick Access Buttons -->
    <div class="quick-access-buttons">
      <ion-button 
        fill="outline" 
        color="tertiary"
        (click)="navigateToSlokas()">
        <ion-icon name="library" slot="start"></ion-icon>
        Important Slokas
      </ion-button>
    </div>
    
    <!-- Language Selection -->
    <div class="language-selection">
      <ion-item lines="none" class="language-item">
        <ion-label position="stacked" color="primary">Choose Language</ion-label>
        <ion-select 
          [(ngModel)]="selectedLanguage" 
          (ionChange)="onLanguageChange()"
          placeholder="Select Language"
          interface="action-sheet"
          class="language-select">
          <!-- <ion-select-option value="english">English</ion-select-option> -->
          <ion-select-option value="tamil">Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</ion-select-option>
          <ion-select-option value="kannada">Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)</ion-select-option>
          <ion-select-option value="sanskrit">Sanskrit (‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§)</ion-select-option>
        </ion-select>
      </ion-item>
    </div>
  </div>


  <!-- Loading State -->
  @if (loading) {
    <div class="loading-container">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <ion-text color="medium">
        <p class="loading-text">Loading chapters...</p>
      </ion-text>
    </div>
  }

  <!-- Cards Grid -->
  @else {
    <div class="cards-container">
      <ion-grid>
        <ion-row>
          @for (card of cardContents; track card.sectionToRedirect) {
            <ion-col size="12" size-md="6" size-lg="4">
              <ion-card class="sloka-card" button="true" (click)="navigateToChapter(card.sectionToRedirect)">
                <div class="card-image-container">
                  <img [src]="card.image" [alt]="card.title" class="card-image" />
                  <div class="card-overlay"></div>
                </div>
                
                <ion-card-header>
                  <ion-card-title class="card-title" [title]="card.title">
                    {{ card.title }}
                  </ion-card-title>
                </ion-card-header>
                
                <ion-card-content>
                  <ion-button 
                    expand="block" 
                    fill="solid" 
                    class="card-button"
                    (click)="navigateToChapter(card.sectionToRedirect); $event.stopPropagation()">
                    <ion-icon name="book" slot="start"></ion-icon>
                    {{ card.buttonText }}
                  </ion-button>
                </ion-card-content>
              </ion-card>
            </ion-col>
          }
        </ion-row>
      </ion-grid>
    </div>
  }

  
</ion-content>

