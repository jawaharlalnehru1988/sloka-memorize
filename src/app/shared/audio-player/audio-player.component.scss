// Audio section styling
.audio-section {
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  background: linear-gradient(135deg, 
    rgba(255, 107, 53, 0.95) 0%,
    rgba(247, 147, 30, 0.9) 25%,
    rgba(255, 215, 0, 0.85) 50%,
    rgba(220, 20, 60, 0.9) 75%,
    rgba(25, 25, 112, 0.95) 100%
  );
  border-radius: 20px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.1),
    inset 0 1px 2px rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;

  // Animated background overlay
  &::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
      45deg,
      transparent 40%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 60%
    );
    animation: shimmer 3s infinite;
    pointer-events: none;
  }

  &.playing {
    animation: gentle-pulse 2s ease-in-out infinite;
    box-shadow: 
      0 12px 40px rgba(255, 107, 53, 0.3),
      inset 0 1px 2px rgba(255, 255, 255, 0.4);
  }

  &.beat-pulse {
    animation: beat-section-pulse 0.2s ease-out;
  }
  
  .audio-title-container {
    text-align: center;
    margin-bottom: 1.5rem;

    .dancing-title {
      h3 {
        margin: 0;
        font-size: 1.4rem;
        font-weight: 700;
        background: linear-gradient(45deg, 
          #fff 0%, 
          #ffeb3b 25%, 
          #ff9800 50%, 
          #fff 75%, 
          #ffeb3b 100%
        );
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbow-text 3s ease-in-out infinite;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }
    }
  }

  // Custom Audio Player
  .custom-audio-player {
    margin-bottom: 1.5rem;
    padding: 2rem;
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0.9) 50%,
      rgba(255, 255, 255, 0.95) 100%
    );
    border-radius: 20px;
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 1px 2px rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(15px);
    border: 2px solid rgba(255, 255, 255, 0.4);
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        45deg,
        rgba(255, 87, 34, 0.05) 0%,
        rgba(255, 152, 0, 0.05) 25%,
        rgba(76, 175, 80, 0.05) 50%,
        rgba(33, 150, 243, 0.05) 75%,
        rgba(156, 39, 176, 0.05) 100%
      );
      pointer-events: none;
    }

    &.visualizer-active {
      box-shadow: 
        0 12px 40px rgba(255, 87, 34, 0.2),
        inset 0 1px 2px rgba(255, 255, 255, 0.9);
    }

    // Audio visualization container
    .audio-visualization {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 1.5rem;
      position: relative;
      height: 200px;

      .visualization-container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 200px;
        height: 200px;

        .circular-visualizer {
          position: absolute;
          top: 0;
          left: 0;
          border-radius: 50%;
          animation: rotate-visualizer 20s linear infinite;
        }

        .spectrum-visualizer {
          position: absolute;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          border-radius: 12px;
          background: linear-gradient(135deg, 
            rgba(0, 0, 0, 0.3),
            rgba(255, 87, 34, 0.1),
            rgba(255, 152, 0, 0.1)
          );
          border: 2px solid rgba(255, 255, 255, 0.4);
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
          backdrop-filter: blur(10px);
          z-index: 5;
          
          // Add subtle glow
          &::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
              rgba(255, 87, 34, 0.3),
              rgba(255, 152, 0, 0.3),
              rgba(76, 175, 80, 0.3),
              rgba(33, 150, 243, 0.3)
            );
            border-radius: 14px;
            z-index: -1;
            animation: spectrum-glow 3s ease-in-out infinite alternate;
          }
        }

        .central-play-button {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background: linear-gradient(135deg, 
            rgba(255, 87, 34, 0.9), 
            rgba(255, 152, 0, 0.9),
            rgba(76, 175, 80, 0.9),
            rgba(33, 150, 243, 0.9),
            rgba(156, 39, 176, 0.9)
          );
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
          backdrop-filter: blur(10px);
          border: 2px solid rgba(255, 255, 255, 0.3);
          z-index: 10;

          &:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.3);
          }

          &.beat-detected {
            animation: beat-pulse 0.15s ease-out;
          }

          ion-icon {
            font-size: 24px;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          }
        }
      }
    }

    .audio-progress-container {
      margin-bottom: 1rem;
      cursor: pointer;
      padding: 10px 0;
      user-select: none;
      -webkit-user-select: none;
      position: relative;

      .audio-progress-bar {
        width: 100%;
        height: 10px;
        background: linear-gradient(90deg, 
          rgba(255, 255, 255, 0.3) 0%,
          rgba(255, 255, 255, 0.2) 100%
        );
        border-radius: 5px;
        position: relative;
        overflow: hidden;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);

        .audio-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, 
            #ff1744 0%,    /* Deep Red */
            #ff5722 15%,   /* Orange Red */
            #ff9800 30%,   /* Orange */
            #ffeb3b 45%,   /* Yellow */
            #4caf50 60%,   /* Green */
            #2196f3 75%,   /* Blue */
            #9c27b0 90%,   /* Purple */
            #e91e63 100%   /* Pink */
          );
          border-radius: 5px;
          transition: width 0.1s ease;
          position: relative;
          box-shadow: 0 2px 8px rgba(255, 87, 34, 0.4);

          &.beat-glow {
            box-shadow: 0 0 20px rgba(255, 87, 34, 0.8);
            animation: progress-beat 0.15s ease-out;
          }
        }

        // Frequency bars overlay
        .frequency-bars {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          display: flex;
          align-items: flex-end;
          pointer-events: none;

          .frequency-bar {
            flex: 1;
            background: linear-gradient(to top, 
              rgba(255, 87, 34, 0.6), 
              rgba(255, 152, 0, 0.6),
              rgba(76, 175, 80, 0.6)
            );
            margin: 0 1px;
            border-radius: 1px 1px 0 0;
            transition: height 0.1s ease;
          }
        }
        
        .audio-progress-thumb {
          position: absolute;
          top: 50%;
          transform: translate(-50%, -50%);
          width: 18px;
          height: 18px;
          background: linear-gradient(135deg, #ff5722, #ff9800);
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
          transition: all 0.2s ease;
          z-index: 2;
          opacity: 0;
          
          .audio-progress-container:hover &,
          .audio-progress-container:active &,
          .audio-progress-container.dragging & {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.2);
          }
        }
      }

      // Progress frequency bars
      .progress-frequency-bars {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: flex-end;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.3s ease;

        &.active {
          opacity: 0.7;
        }

        .frequency-bar {
          flex: 1;
          background: linear-gradient(to top, 
            rgba(255, 87, 34, 0.8), 
            rgba(255, 152, 0, 0.8),
            rgba(76, 175, 80, 0.8)
          );
          margin: 0 1px;
          border-radius: 1px 1px 0 0;
          transition: height 0.1s ease;
          min-height: 2px;
        }
      }
    }

    .audio-controls {
      &.rainbow-mode {
        .audio-time {
          .current-time {
            background: linear-gradient(45deg, #ff5722, #ff9800);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
          }
        }
      }

      .audio-time {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        font-size: 1rem;
        color: var(--ion-color-medium);
        font-weight: 600;
        padding: 0.5rem;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 12px;
        backdrop-filter: blur(10px);

        .current-time {
          color: #ff5722;
          font-weight: 700;
          font-size: 1.1rem;
        }

        .duration {
          color: #666;
          font-weight: 500;
        }
      }

      .audio-actions {
        ion-button {
          --border-radius: 25px;
          --padding-top: 12px;
          --padding-bottom: 12px;
          font-weight: 600;
          --box-shadow: 0 4px 16px rgba(var(--ion-color-secondary-rgb), 0.3);
          transition: all 0.3s ease;
          
          ion-icon {
            margin-right: 8px;
          }

          &:hover {
            transform: translateY(-2px);
            --box-shadow: 0 6px 20px rgba(var(--ion-color-secondary-rgb), 0.4);
          }
        }

        // Additional controls row
        .audio-controls-row {
          display: flex;
          gap: 0.5rem;
          margin-top: 1rem;
          justify-content: space-between;

          ion-button {
            flex: 1;
            min-width: 0;
            --border-radius: 20px;
            --padding-top: 8px;
            --padding-bottom: 8px;
            font-size: 0.85rem;
            font-weight: 500;
            position: relative;
            overflow: hidden;

            // Rainbow border effect
            &.rainbow-border::before {
              content: '';
              position: absolute;
              top: -2px;
              left: -2px;
              right: -2px;
              bottom: -2px;
              background: linear-gradient(45deg, 
                #ff5722, #ff9800, #4caf50, #2196f3, 
                #9c27b0, #e91e63, #ff5722
              );
              border-radius: 22px;
              z-index: -1;
              animation: rainbow-rotation 3s linear infinite;
            }

            ion-icon {
              margin-right: 4px;
              font-size: 1.1rem;
            }

            // Speed control button
            &[color="primary"] {
              --background: linear-gradient(45deg, var(--ion-color-primary), var(--ion-color-primary-shade));
              --color: white;
              --box-shadow: 0 3px 12px rgba(var(--ion-color-primary-rgb), 0.3);
              
              &:hover {
                --box-shadow: 0 4px 16px rgba(var(--ion-color-primary-rgb), 0.4);
              }
            }

            // Download button
            &[color="success"] {
              --background: linear-gradient(45deg, var(--ion-color-success), var(--ion-color-success-shade));
              --color: white;
              --box-shadow: 0 3px 12px rgba(var(--ion-color-success-rgb), 0.3);
              
              &:hover {
                --box-shadow: 0 4px 16px rgba(var(--ion-color-success-rgb), 0.4);
              }
            }

            // Share button
            &[color="tertiary"] {
              --background: linear-gradient(45deg, var(--ion-color-tertiary), var(--ion-color-tertiary-shade));
              --color: white;
              --box-shadow: 0 3px 12px rgba(var(--ion-color-tertiary-rgb), 0.3);
              
              &:hover {
                --box-shadow: 0 4px 16px rgba(var(--ion-color-tertiary-rgb), 0.4);
              }
            }

            // Loop button styling
            &[color="warning"] {
              --background: linear-gradient(45deg, var(--ion-color-warning), var(--ion-color-warning-shade));
              --color: white;
              --box-shadow: 0 3px 12px rgba(var(--ion-color-warning-rgb), 0.3);
              
              &:hover {
                --box-shadow: 0 4px 16px rgba(var(--ion-color-warning-rgb), 0.4);
              }
              
              &.active {
                --background: linear-gradient(45deg, var(--ion-color-warning-shade), var(--ion-color-warning-tint));
                transform: scale(1.02);
                animation: pulse-loop 2s infinite;
              }
            }

            &[color="medium"] {
              --color: var(--ion-color-medium);
              --border-color: var(--ion-color-medium);
              
              &:hover {
                --background: rgba(var(--ion-color-medium-rgb), 0.1);
              }
            }
          }

          // Mobile responsive
          @media (max-width: 480px) {
            flex-direction: column;
            gap: 0.75rem;
          }
        }
      }
    }
  }
}

// Pulse animation for active loop button
@keyframes pulse-loop {
  0% {
    box-shadow: 0 3px 12px rgba(var(--ion-color-warning-rgb), 0.3);
  }
  50% {
    box-shadow: 0 6px 20px rgba(var(--ion-color-warning-rgb), 0.6);
  }
  100% {
    box-shadow: 0 3px 12px rgba(var(--ion-color-warning-rgb), 0.3);
  }
}

// Rainbow rotation animation for buttons
@keyframes rainbow-rotation {
  0% {
    background: linear-gradient(45deg, 
      #ff5722, #ff9800, #4caf50, #2196f3, 
      #9c27b0, #e91e63, #ff5722
    );
  }
  16.67% {
    background: linear-gradient(45deg, 
      #ff9800, #4caf50, #2196f3, #9c27b0, 
      #e91e63, #ff5722, #ff9800
    );
  }
  33.33% {
    background: linear-gradient(45deg, 
      #4caf50, #2196f3, #9c27b0, #e91e63, 
      #ff5722, #ff9800, #4caf50
    );
  }
  50% {
    background: linear-gradient(45deg, 
      #2196f3, #9c27b0, #e91e63, #ff5722, 
      #ff9800, #4caf50, #2196f3
    );
  }
  66.67% {
    background: linear-gradient(45deg, 
      #9c27b0, #e91e63, #ff5722, #ff9800, 
      #4caf50, #2196f3, #9c27b0
    );
  }
  83.33% {
    background: linear-gradient(45deg, 
      #e91e63, #ff5722, #ff9800, #4caf50, 
      #2196f3, #9c27b0, #e91e63
    );
  }
  100% {
    background: linear-gradient(45deg, 
      #ff5722, #ff9800, #4caf50, #2196f3, 
      #9c27b0, #e91e63, #ff5722
    );
  }
}

// Circular visualizer rotation animation
@keyframes rotate-visualizer {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// Beat pulse animation for central play button
@keyframes beat-pulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.15);
    box-shadow: 0 8px 40px rgba(255, 87, 34, 0.5);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
}

// Progress bar beat glow animation
@keyframes progress-beat {
  0% {
    box-shadow: 0 0 5px rgba(255, 87, 34, 0.5);
  }
  50% {
    box-shadow: 0 0 25px rgba(255, 87, 34, 0.9);
  }
  100% {
    box-shadow: 0 0 5px rgba(255, 87, 34, 0.5);
  }
}

// Spectrum visualizer glow animation
@keyframes spectrum-glow {
  0% {
    opacity: 0.3;
    transform: scale(1);
  }
  100% {
    opacity: 0.6;
    transform: scale(1.02);
  }
}

// Shimmer effect for audio section
@keyframes shimmer {
  0% {
    transform: translateX(-100%) translateY(-100%);
  }
  100% {
    transform: translateX(100%) translateY(100%);
  }
}

// Gentle pulse for playing state
@keyframes gentle-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
}

// Beat section pulse
@keyframes beat-section-pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

// Rainbow text animation
@keyframes rainbow-text {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}